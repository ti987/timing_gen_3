<!DOCTYPE html>
<html lang="en">
<!-- Version 3.4.1 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timing Gen 3 - Interactive Digital Logic Waveform Editor</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Paper.js library: Using local shim (replace with CDN in production) -->
    <!-- For CDN: <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.17/paper-full.min.js"></script> -->
    <script src="libs/paper.js"></script>
</head>
<body>
    <div id="app">
        <!-- Top Menu Bar -->
        <div id="menu-bar">
            <button id="new-btn" class="menu-btn">New</button>
            <button id="undo-btn" class="menu-btn">Undo</button>
            <button id="redo-btn" class="menu-btn">Redo</button>
            <button id="redraw-btn" class="menu-btn">Redraw</button>
            <button id="add-signal-btn" class="menu-btn">Add Signal</button>
            <div class="menu-dropdown">
                <button id="add-menu-btn" class="menu-btn">Add tool</button>
                <div id="add-submenu" class="submenu" style="display: none;">
                    <div class="menu-item" id="add-measure-menu">Measure</div>
                    <div class="menu-item" id="add-arrow-menu">Arrow</div>
                    <div class="menu-item" id="add-group-menu">Group</div>
                    <div class="menu-item" id="add-text-menu">Text</div>
                    <div class="menu-item" id="add-counter-menu">Counter</div>
                    <div class="menu-item" id="add-ac-table-menu">AC Table</div>
                    <div class="menu-item" id="add-tear-menu">Tear</div>
                </div>
            </div>
            <button id="global-option-btn" class="menu-btn">Global Option</button>
            <button id="save-btn" class="menu-btn">Save</button>
            <button id="load-btn" class="menu-btn">Load</button>
            <button id="export-svg-btn" class="menu-btn">Export SVG</button>
            <input type="file" id="file-input" accept=".td3,.json" style="display: none;">
            <div class="menu-dropdown">
                <button id="help-menu-btn" class="menu-btn">Help</button>
                <div id="help-submenu" class="submenu" style="display: none;">
                    <div class="menu-item" id="about-menu">About</div>
                </div>
            </div>
            <label>Cycles: </label>
            <input type="number" id="cycles-input" value="20" min="5" max="100" style="width: 60px;">
        </div>

        <!-- Drawing Area -->
        <div id="drawing-area">
            <canvas id="waveform-canvas"></canvas>
        </div>

        <!-- Signal Name Column (overlay) -->
        <div id="signal-names"></div>
    </div>

    <!-- Add Signal Dialog -->
    <div id="add-signal-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Add Signal</h3>
            <label>Signal Name:</label>
            <input type="text" id="signal-name-input" placeholder="Enter signal name">
            <br><br>
            <label>Type:</label>
            <select id="signal-type-select">
                <option value="clock">Clock</option>
                <option value="bit">Bit</option>
                <option value="bus">Bus</option>
            </select>
            <br><br>
            <button id="dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Edit Signal Dialog -->
    <div id="edit-signal-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Edit Signal</h3>
            <label>Signal Name:</label>
            <input type="text" id="edit-signal-name-input" placeholder="Enter signal name">
            <br><br>
            <label>Type:</label>
            <select id="edit-signal-type-select">
                <option value="clock">Clock</option>
                <option value="bit">Bit</option>
                <option value="bus">Bus</option>
            </select>
            <br><br>
            <button id="edit-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="edit-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Bus Value Dialog -->
    <div id="bus-value-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Set Bus Value</h3>
            <label>Radix:</label>
            <select id="bus-radix-select">
                <option value="hex">Hex</option>
                <option value="dec">Dec</option>
                <option value="string">String</option>
                <option value="X">X (Unknown)</option>
                <option value="Z">Z (High-Z)</option>
            </select>
            <br><br>
            <label>Value:</label>
            <input type="text" id="bus-value-input" placeholder="Enter value">
            <br><br>
            <button id="bus-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="bus-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for Signal Name -->
    <div id="signal-name-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="font-signal-name-menu">Font</div>
        <div class="menu-item" id="cancel-signal-name-menu">Cancel</div>
    </div>

    <!-- Context Menu for Signal -->
    <div id="signal-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-signal-menu">Edit</div>
        <div class="menu-item" id="signal-options-menu">Signal Options</div>
        <div class="menu-item" id="delete-signal-menu">Delete</div>
        <div class="menu-item" id="cancel-signal-menu">Cancel</div>
    </div>

    <!-- Context Menu for Bit Signal Cycle -->
    <div id="bit-cycle-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" data-value="0">0 (Low)</div>
        <div class="menu-item" data-value="1">1 (High)</div>
        <div class="menu-item" data-value="X">X (Unknown)</div>
        <div class="menu-item" data-value="Z">Z (High-Z)</div>
        <div class="menu-item" id="bit-cycle-options-menu">Cycle Options</div>
        <div class="menu-item" id="remove-bit-change-menu">Remove Change</div>
        <div class="menu-item" id="insert-cycles-bit-menu">Insert Cycles</div>
        <div class="menu-item" id="delete-cycles-bit-menu">Delete Cycles</div>
        <div class="menu-item" id="cancel-bit-cycle-menu">Cancel</div>
    </div>

    <!-- Context Menu for Bus Signal Cycle -->
    <div id="bus-cycle-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="set-bus-value-menu">Set Value</div>
        <div class="menu-item" id="bus-cycle-options-menu">Cycle Options</div>
        <div class="menu-item" id="remove-bus-change-menu">Remove Change</div>
        <div class="menu-item" id="insert-cycles-bus-menu">Insert Cycles</div>
        <div class="menu-item" id="delete-cycles-bus-menu">Delete Cycles</div>
        <div class="menu-item" id="cancel-bus-cycle-menu">Cancel</div>
    </div>

    <!-- Context Menu for Bus Value Text -->
    <div id="bus-value-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="font-bus-value-menu">Font</div>
        <div class="menu-item" id="cancel-bus-value-menu">Cancel</div>
    </div>

    <!-- Context Menu for Cycle Header -->
    <div id="cycle-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="insert-cycles-global-menu">Insert Cycles</div>
        <div class="menu-item" id="delete-cycles-global-menu">Delete Cycles</div>
        <div class="menu-item" id="add-tear-cycle-menu" style="display: none;">Add Tear</div>
        <div class="menu-item" id="remove-tear-cycle-menu" style="display: none;">Remove Tear</div>
        <div class="menu-item" id="cancel-cycle-menu">Cancel</div>
    </div>

    <!-- Global Option Dialog -->
    <div id="global-option-dialog" class="dialog" style="display: none;">
        <div class="dialog-content" style="min-width: 400px;">
            <h3>Global Options</h3>
            
            <label>Clock Period:</label>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="number" id="clock-period-input" value="10" min="0.001" step="0.001" style="flex: 1;">
                <select id="clock-period-unit-select" style="flex: 0 0 80px;">
                    <option value="ps">ps</option>
                    <option value="ns" selected>ns</option>
                    <option value="us">Î¼s</option>
                    <option value="ms">ms</option>
                </select>
            </div>
            
            <label>Signal Row Height:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="number" id="signal-row-height-input" value="80" min="40" max="200" style="flex: 1;">
                <span style="flex: 0 0 30px;">px</span>
            </div>
            
            <label>Measure/Group Row Height:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="number" id="measure-row-height-input" value="80" min="40" max="200" style="flex: 1;">
                <span style="flex: 0 0 30px;">px</span>
            </div>
            
            <label>Slew (transition pixels):</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="number" id="slew-input" value="4" min="0" max="50" style="flex: 1;">
                <span style="flex: 0 0 30px;">px</span>
            </div>
            
            <label>Delay Min:</label>
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                <input type="number" id="delay-min-input" value="0" min="0" step="0.001" style="flex: 1;">
                <span id="delay-min-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Max:</label>
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                <input type="number" id="delay-max-input" value="0" min="0" step="0.001" style="flex: 1;">
                <span id="delay-max-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Uncertainty Color:</label>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="color" id="delay-color-input" value="#0000FF" style="flex: 1;">
            </div>
            
            <button id="global-option-ok-btn" class="dialog-btn">OK</button>
            <button id="global-option-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Signal Options Dialog -->
    <div id="signal-options-dialog" class="dialog" style="display: none;">
        <div class="dialog-content" style="min-width: 400px;">
            <h3>Signal Options</h3>
            
            <label>Slew (transition pixels):</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="number" id="signal-slew-input" min="0" max="50" placeholder="Use global" style="flex: 1;">
                <span style="flex: 0 0 30px;">px</span>
            </div>
            
            <label>Delay Min:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                <input type="number" id="signal-delay-min-input" min="0" step="0.001" placeholder="Use global" style="flex: 1;">
                <span id="signal-delay-min-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Max:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                <input type="number" id="signal-delay-max-input" min="0" step="0.001" placeholder="Use global" style="flex: 1;">
                <span id="signal-delay-max-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Uncertainty Color:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="color" id="signal-delay-color-input" placeholder="Use global" style="flex: 1;">
            </div>
            
            <button id="signal-options-ok-btn" class="dialog-btn">OK</button>
            <button id="signal-options-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Cycle Options Dialog -->
    <div id="cycle-options-dialog" class="dialog" style="display: none;">
        <div class="dialog-content" style="min-width: 400px;">
            <h3>Cycle Options</h3>
            
            <label>Slew (transition pixels):</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="number" id="cycle-slew-input" min="0" max="50" placeholder="Use signal/global" style="flex: 1;">
                <span style="flex: 0 0 30px;">px</span>
            </div>
            
            <label>Delay Min:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                <input type="number" id="cycle-delay-min-input" min="0" step="0.001" placeholder="Use signal/global" style="flex: 1;">
                <span id="cycle-delay-min-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Max:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                <input type="number" id="cycle-delay-max-input" min="0" step="0.001" placeholder="Use signal/global" style="flex: 1;">
                <span id="cycle-delay-max-unit-label" style="flex: 0 0 60px;">ns</span>
            </div>
            
            <label>Delay Uncertainty Color:</label>
            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px;">
                <input type="color" id="cycle-delay-color-input" placeholder="Use signal/global" style="flex: 1;">
            </div>
            
            <button id="cycle-options-ok-btn" class="dialog-btn">OK</button>
            <button id="cycle-options-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Insert Cycles Dialog -->
    <div id="insert-cycles-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Insert Cycles</h3>
            <label>Number of Cycles:</label>
            <input type="number" id="insert-cycles-input" value="1" min="1" max="50" style="width: 100px;">
            <br><br>
            <button id="insert-cycles-ok-btn" class="dialog-btn">OK</button>
            <button id="insert-cycles-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Delete Cycles Dialog -->
    <div id="delete-cycles-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Delete Cycles</h3>
            <label>Number of Cycles:</label>
            <input type="number" id="delete-cycles-input" value="1" min="1" max="50" style="width: 100px;">
            <br><br>
            <button id="delete-cycles-ok-btn" class="dialog-btn">OK</button>
            <button id="delete-cycles-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- About Dialog -->
    <div id="about-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>About Timing Gen 3</h3>
            <p><strong>Timing Gen 3</strong></p>
            <p>Interactive Digital Logic Waveform Editor</p>
            <p>Version: <strong>3.4.0</strong></p>
            <br>
            <button id="about-ok-btn" class="dialog-btn">OK</button>
        </div>
    </div>

    <!-- Instruction Box (no buttons, auto-dismisses) -->
    <div id="instruction-box" class="instruction-box" style="display: none;">
        <div class="instruction-content">
            <p id="instruction-text"></p>
        </div>
    </div>

    <!-- Measure Text Dialog -->
    <div id="measure-text-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Enter Measure Text</h3>
            <label>Label:</label>
            <input type="text" id="measure-text-input" placeholder="Enter label text">
            <br><br>
            <button id="measure-text-ok-btn" class="dialog-btn">OK</button>
            <button id="measure-text-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Add Text Row Dialog -->
    <div id="add-text-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Add Text Row</h3>
            <label>Text:</label>
            <input type="text" id="text-row-input" placeholder="Enter text (or leave empty for blank row)">
            <br><br>
            <button id="text-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="text-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Add Counter Row Dialog -->
    <div id="add-counter-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Add Counter Row</h3>
            <label>Start Value:</label>
            <input type="text" id="counter-start-value-input" placeholder="e.g., t1 or 1" value="1">
            <br><br>
            <label>Start Cycle:</label>
            <input type="number" id="counter-start-cycle-input" value="0" min="0">
            <br><br>
            <button id="counter-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="counter-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Edit Counter Value Dialog -->
    <div id="edit-counter-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Edit Counter Value</h3>
            <label>New Start Value (from this cycle):</label>
            <input type="text" id="edit-counter-value-input" placeholder="Enter value or leave empty for default">
            <br><br>
            <button id="edit-counter-ok-btn" class="dialog-btn">OK</button>
            <button id="edit-counter-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Add Tear Dialog -->
    <div id="add-tear-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Add Tear</h3>
            <label>Cycle Number:</label>
            <input type="number" id="tear-cycle-input" value="0" min="0">
            <br><br>
            <button id="tear-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="tear-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Edit Text Row Dialog -->
    <div id="edit-text-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Edit Text</h3>
            <label>Text:</label>
            <input type="text" id="edit-text-input" placeholder="Enter text">
            <br><br>
            <button id="edit-text-ok-btn" class="dialog-btn">OK</button>
            <button id="edit-text-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Font Selection Dialog -->
    <div id="font-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Font Settings</h3>
            <label>Font Family:</label>
            <select id="font-family-select">
                <option value="Arial">Arial</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Courier New">Courier New</option>
                <option value="Georgia">Georgia</option>
                <option value="Verdana">Verdana</option>
                <option value="monospace">Monospace</option>
            </select>
            <br><br>
            <label>Font Size:</label>
            <input type="number" id="font-size-input" value="14" min="8" max="72">
            <br><br>
            <label>Color:</label>
            <input type="color" id="font-color-input" value="#000000" style="width: 200px; height: 40px;">
            <br><br>
            <button id="font-ok-btn" class="dialog-btn">OK</button>
            <button id="font-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Color Selection Dialog -->
    <div id="color-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Text Color</h3>
            <label>Color:</label>
            <input type="color" id="text-color-input" value="#000000" style="width: 200px; height: 40px;">
            <br><br>
            <button id="color-ok-btn" class="dialog-btn">OK</button>
            <button id="color-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for Measure -->
    <div id="measure-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="delete-measure-menu">Delete</div>
        <div class="menu-item" id="cancel-measure-menu">Cancel</div>
    </div>

    <!-- Context Menu for Measure Text -->
    <div id="measure-text-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-measure-text-menu">Edit Text</div>
        <div class="menu-item" id="font-measure-text-menu">Font</div>
        <div class="menu-item" id="color-measure-text-menu">Color</div>
        <div class="menu-item" id="cancel-measure-text-menu">Cancel</div>
    </div>

    <!-- Context Menu for Arrow -->
    <div id="arrow-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="delete-arrow-menu">Delete</div>
        <div class="menu-item" id="arrow-options-menu">Options</div>
        <div class="menu-item" id="cancel-arrow-menu">Cancel</div>
    </div>

    <!-- Arrow Options Dialog -->
    <div id="arrow-options-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Arrow Options</h3>
            <label>Width (pixels):</label>
            <input type="number" id="arrow-width-input" value="2" min="1" max="10" style="width: 100px;">
            <br><br>
            <label>Color:</label>
            <input type="color" id="arrow-color-input" value="#0000FF" style="width: 200px; height: 40px;">
            <br><br>
            <button id="arrow-options-ok-btn" class="dialog-btn">OK</button>
            <button id="arrow-options-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for Arrow Text -->
    <div id="arrow-text-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-arrow-text-menu">Edit</div>
        <div class="menu-item" id="font-arrow-text-menu">Font</div>
        <div class="menu-item" id="cancel-arrow-text-menu">Cancel</div>
    </div>

    <!-- Edit Arrow Text Dialog -->
    <div id="edit-arrow-text-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Edit Arrow Text</h3>
            <label>Text:</label>
            <input type="text" id="edit-arrow-text-input" placeholder="Enter text">
            <br><br>
            <button id="edit-arrow-text-ok-btn" class="dialog-btn">OK</button>
            <button id="edit-arrow-text-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Arrow Text Options Dialog -->
    <div id="arrow-text-options-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Arrow Text Options</h3>
            <label>Font Family:</label>
            <select id="arrow-text-font-select">
                <option value="Arial">Arial</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Courier New">Courier New</option>
                <option value="Georgia">Georgia</option>
                <option value="Verdana">Verdana</option>
                <option value="monospace">Monospace</option>
            </select>
            <br><br>
            <label>Font Size:</label>
            <input type="number" id="arrow-text-size-input" value="12" min="8" max="72">
            <br><br>
            <label>Color:</label>
            <input type="color" id="arrow-text-color-input" value="#0000FF" style="width: 200px; height: 40px;">
            <br><br>
            <button id="arrow-text-options-ok-btn" class="dialog-btn">OK</button>
            <button id="arrow-text-options-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for Text Row -->
    <div id="text-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-text-menu">Edit</div>
        <div class="menu-item" id="font-text-menu">Font</div>
        <div class="menu-item" id="color-text-menu">Color</div>
        <div class="menu-item" id="cancel-text-menu">Cancel</div>
    </div>

    <!-- Context Menu for Text Row Name Column -->
    <div id="text-row-name-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="delete-text-row-menu">Delete</div>
        <div class="menu-item" id="cancel-text-row-menu">Cancel</div>
    </div>

    <!-- Context Menu for Counter Cycle -->
    <div id="counter-cycle-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="continue-counter-menu">Continue</div>
        <div class="menu-item" id="restart-counter-menu">Restart Value</div>
        <div class="menu-item" id="blank-counter-menu">Blank</div>
        <div class="menu-item" id="cancel-counter-cycle-menu">Cancel</div>
    </div>

    <!-- Context Menu for Measure Row Name Column -->
    <div id="measure-row-name-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="delete-measure-row-menu">Delete</div>
        <div class="menu-item" id="cancel-measure-row-menu">Cancel</div>
    </div>

    <!-- Add AC Table Dialog -->
    <div id="add-ac-table-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Add AC Characteristics Table</h3>
            <label>Title:</label>
            <input type="text" id="ac-table-title-input" placeholder="Enter table title" value="Read Cycle">
            <br><br>
            <button id="ac-table-dialog-ok-btn" class="dialog-btn">OK</button>
            <button id="ac-table-dialog-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Edit AC Table Cell Dialog -->
    <div id="edit-ac-cell-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Edit Cell</h3>
            <label>Text:</label>
            <input type="text" id="edit-ac-cell-input" placeholder="Enter text">
            <br><br>
            <button id="edit-ac-cell-ok-btn" class="dialog-btn">OK</button>
            <button id="edit-ac-cell-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- AC Table Cell Font Dialog -->
    <div id="ac-cell-font-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Cell Font Settings</h3>
            <label>Font Family:</label>
            <select id="ac-cell-font-family-select">
                <option value="Arial">Arial</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Courier New">Courier New</option>
                <option value="Georgia">Georgia</option>
                <option value="Verdana">Verdana</option>
                <option value="monospace">Monospace</option>
            </select>
            <br><br>
            <label>Font Size:</label>
            <input type="number" id="ac-cell-font-size-input" value="12" min="8" max="72">
            <br><br>
            <label>Color:</label>
            <input type="color" id="ac-cell-font-color-input" value="#000000">
            <br><br>
            <button id="ac-cell-font-ok-btn" class="dialog-btn">OK</button>
            <button id="ac-cell-font-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for AC Table Cell -->
    <div id="ac-cell-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-ac-cell-menu">Edit</div>
        <div class="menu-item" id="font-ac-cell-menu">Font</div>
        <div class="menu-item" id="cancel-ac-cell-menu">Cancel</div>
    </div>

    <!-- Context Menu for AC Table Parameter Cell (has extra options) -->
    <div id="ac-param-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="edit-ac-param-menu">Edit</div>
        <div class="menu-item" id="font-ac-param-menu">Font</div>
        <div class="menu-item" id="rowspan-ac-param-menu">Row Span</div>
        <div class="menu-item" id="delete-ac-param-menu">Delete Row</div>
        <div class="menu-item" id="cancel-ac-param-menu">Cancel</div>
    </div>

    <!-- Row Span Selection Dialog -->
    <div id="ac-rowspan-dialog" class="dialog" style="display: none;">
        <div class="dialog-content">
            <h3>Select Row Span</h3>
            <label>
                <input type="radio" name="rowspan" value="1" checked> 1 Row
            </label>
            <br>
            <label>
                <input type="radio" name="rowspan" value="2"> 2 Rows
            </label>
            <br><br>
            <button id="ac-rowspan-ok-btn" class="dialog-btn">OK</button>
            <button id="ac-rowspan-cancel-btn" class="dialog-btn">Cancel</button>
        </div>
    </div>

    <!-- Context Menu for AC Table (for positioning) -->
    <div id="ac-table-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" id="move-ac-table-top-menu">Move to Top</div>
        <div class="menu-item" id="move-ac-table-bottom-menu">Move to Bottom</div>
        <div class="menu-item" id="update-ac-table-menu">Update</div>
        <div class="menu-item" id="delete-ac-table-menu">Delete Table</div>
        <div class="menu-item" id="cancel-ac-table-menu">Cancel</div>
    </div>

    <!-- Load JavaScript modules in correct order -->
    <script src="js/timing_gen_rows.js"></script>
    <script src="js/timing_gen_data.js"></script>
    <script src="js/timing_gen_ui.js"></script>
    <script src="js/timing_gen_rendering.js"></script>
    <script src="js/timing_gen_undo.js"></script>
    <script src="js/timing_gen_tear.js"></script>
    <script src="js/timing_gen_cycle.js"></script>
    <script src="js/timing_gen_text_counter.js"></script>
    <script src="js/timing_gen_measure.js"></script>
    <script src="js/timing_gen_ac_table.js"></script>
    <script src="js/timing_gen_core.js"></script>
</body>
</html>
